(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b75e157e"],{2532:function(e,t,r){"use strict";var n=r("23e7"),a=r("e330"),s=r("5a34"),i=r("1d80"),c=r("577e"),o=r("ab13"),d=a("".indexOf);n({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~d(c(i(this)),c(s(e)),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,r){var n=r("da84"),a=r("44e7"),s=n.TypeError;e.exports=function(e){if(a(e))throw s("The method doesn't accept regular expressions");return e}},"80c9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"strategy-section"},[e._m(0),r("div",{staticClass:"strategy-grid border-shadow"},[e._m(1),e._l(e.allStrategies,(function(t){return r("div",{key:t.name,staticClass:"strategy-grid-row"},[r("span",{staticClass:"grid-span"},[e._v(e._s(t.name))]),r("span",{staticClass:"grid-span color-green"},[e._v(e._s(t.risk_factor))]),r("span",{staticClass:"grid-span"},[e._v(e._s(t.apy)+"%")]),r("span",{staticClass:"grid-span"},[e._v(e._s(t.type))]),r("button",{ref:"addStrategyBtn",refInFor:!0,staticClass:"grid-span add",attrs:{disabled:e.userStrategies.includes(t.name),"data-id":t.name},on:{click:function(r){return e.addStrategyHandler(t.name)}}},[e._v(" Add ")])])}))],2)]),r("div",{staticClass:"button-section"},[r("button",{staticClass:"big-btn",on:{click:e.prepareCoins}},[e._v("Construct strategy")])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"section-header"},[r("div",{staticClass:"section__title"},[e._v("Strategy addition")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"strategy-grid-row grid-row-header"},[r("p",{staticClass:"grid-header question"},[e._v("Strategies")]),r("p",{staticClass:"grid-header question"},[e._v("Risk Factor")]),r("p",{staticClass:"grid-header question"},[e._v("APY")]),r("p",{staticClass:"grid-header question"},[e._v("Type")]),r("p",{staticClass:"grid-header"})])}],s=r("3835"),i=r("2909"),c=(r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("d9e2"),r("06c5"));function o(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Object(c["a"])(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(o)throw s}}}}var d=r("1da1"),u=r("5530"),l=r("668b"),f=(r("96cf"),r("7db0"),r("b0c0"),r("25f0"),r("caad"),r("2532"),r("159b"),r("2f62")),p=r("4c82"),b=r("a18c"),v=r("757b"),g=(r("63ad"),{name:"StrategyAddition",data:function(){return{allStrategies:[]}},methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["GET_ALL_STRATEGIES","GET_USER_STRATEGIES"])),{},{addStrategyHandler:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,c,o,d,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(n=t.USER_STRATEGIES.find((function(t){return t.name===e})),console.log(n),void 0!==n&&!n.pendingProxy){r.next=45;break}if(console.info("Start to create strategy."),a="",void 0!==n){r.next=19;break}return r.next=10,Object(p["a"])(t.USER_ACCOUNT);case 10:return s=r.sent,a=s["_id"],console.info("Strategy created id : ".concat(a,".")),t.deactivateAddButton(e),r.next=16,Object(p["i"])(a);case 16:console.info("Added coins  to your Wallet."),r.next=20;break;case 19:a=n._id;case 20:return r.next=22,Object(p["b"])(a);case 22:return i=r.sent,c=i.tx,o=i.operationId,console.info("Strategy deployed, ready to send transaction."),r.next=28,t.sendDeployProxyTransaction(c);case 28:return d=r.sent,r.next=31,Object(p["g"])(a);case 31:return u=r.sent,console.info("Transaction sent. Proxy address: ".concat(u.data.proxyAddress,".")),r.next=35,Object(p["j"])(a,d,o);case 35:return console.info("Operation added."),r.next=38,Object(p["k"])(a,u.data.proxyAddress);case 38:return l=r.sent,console.info("Updated strategy with proxy address."),t.GET_USER_STRATEGIES({strategy:l}),r.next=43,t.prepareCoins(a).then(b["a"].push("/portfolio"));case 43:r.next=48;break;case 45:if(n.pendingProxy){r.next=48;break}return r.next=48,t.prepareCoins(n._id).then(b["a"].push("/portfolio"));case 48:case"end":return r.stop()}}),r)})))()},prepareCoins:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,i,c,o,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p["i"])(e);case 3:r=t.sent,console.info("New strategy ready. Start to convert coins for other operations."),n=Object(v["a"])(r),a=!1,s=!1,t.prev=8,c=Object(l["a"])(n);case 10:return t.next=12,c.next();case 12:if(!(a=!(o=t.sent).done)){t.next=18;break}d=o.value,console.log(d.message);case 15:a=!1,t.next=10;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](8),s=!0,i=t.t0;case 24:if(t.prev=24,t.prev=25,!a||null==c.return){t.next=29;break}return t.next=29,c.return();case 29:if(t.prev=29,!s){t.next=32;break}throw i;case 32:return t.finish(29);case 33:return t.finish(24);case 34:t.next=40;break;case 36:return t.prev=36,t.t1=t["catch"](0),console.error(t.t1),t.abrupt("return");case 40:case"end":return t.stop()}}),t,null,[[0,36],[8,20,24,34],[25,,29,33]])})))()},deactivateAddButton:function(e){var t,r=o(Object(i["a"])(this.$refs.addStrategyBtn).entries());try{for(r.s();!(t=r.n()).done;){var n=Object(s["a"])(t.value,2),a=n[0],c=n[1];c.dataset.id===e.toString()&&(this.$refs.addStrategyBtn[a].disabled=!0)}}catch(d){r.e(d)}finally{r.f()}},isUserHaveStrategy:function(e){return this.userStrategies.includes(e)},sendDeployProxyTransaction:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(v["b"])(e);case 3:return r=t.sent,t.abrupt("return",r);case 7:return t.prev=7,t.t0=t["catch"](0),console.log("Problems with send transaction deployProxy: ",t.t0),t.abrupt("return",{});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}),computed:Object(u["a"])(Object(u["a"])({},Object(f["c"])(["ALL_STRATEGIES","USER_STRATEGIES","USER_ACCOUNT"])),{},{userStrategies:function(){var e=[];return this.USER_STRATEGIES.forEach((function(t){t.pendingProxy||e.push(t.name)})),e}}),created:function(){var e=this;this.GET_ALL_STRATEGIES().then((function(t){return e.allStrategies=Object(i["a"])(t)}))},mounted:function(){}}),h=g,y=(r("fe8f"),r("2877")),S=Object(y["a"])(h,n,a,!1,null,"e3aae89e",null);t["default"]=S.exports},ab13:function(e,t,r){var n=r("b622"),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},b2f4:function(e,t,r){},caad:function(e,t,r){"use strict";var n=r("23e7"),a=r("4d64").includes,s=r("44d2");n({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},fe8f:function(e,t,r){"use strict";r("b2f4")}}]);
//# sourceMappingURL=chunk-b75e157e.1e54c924.js.map